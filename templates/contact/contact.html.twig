{% extends 'base.html.twig' %}

{% block title %}Contact{% endblock %}

{% block content %}
{# Formulaire de contact #}
    <div class="container-fluid">
        <h1 class="text-center mt-5 pb-2 border-bottom border-success">Formulaire de contact</h1>
        <form class="text-center mt-5" method="post">
            <input class="rounded mb-2" type="text" placeholder="Entrez votre nom" id="name" autocomplete="off"></br>
            <input class="rounded mb-2" type="email" placeholder="Entrez votre adresse mail" id="email" autocomplete="off"></br>
            <input class="rounded mb-5" type="text" placeholder="Sujet du message" id="subject" autocomplete="off"></br>
            <textarea class="rounded" id="message" placeholder="Rédigez votre message ici" cols="50" rows="10" style="resize: none"></textarea></br>
            <button  type="submit" class="rounded mt-3 badge badge-success" style="font-size: 20px" id="btn-envoi">Envoyer</button> 
        </form>
    </div>
{% endblock %}
   
{# Partie Javascript #}
{% block scripts %}
    <script>
        const form = document.querySelector("form");
        
        function sendEmail()
        {
            // Récupération des champs rempli par l'utilisateur.
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const sujet = document.getElementById('subject').value;
            const message = document.getElementById('message').value;

            // verifier si les champs ne sont pas vides.
            if((name == "" || email == "" || sujet == "" || message == "")) 
            {
                Swal.fire({
                    title: "Erreur",
                    text: "Un ou plusieurs champs sont vides",
                    icon: "error"
                });
            }
            else
            // Sinon on envoi le message "avec success".
            {
                /* ici on peu inserer une fonction pour envoyer réellement un email suivi du message. */
                Swal.fire({
                    title: "Message envoyé",
                    text: "Merci de m'avoir contacté, je vous recontacterai au plus vite sur l'adresse mail renseignée.",
                    icon: "success"
                });

                // ici un delais de 5 secondes afin de recharger la page d'acceuil.
                setTimeout( () => {
                window.location ='{{ path('homepage') }}';  
                }, 5000);
            }
        }
        // action dés que submit est invoqué.
        form.addEventListener("submit", (e) =>
        {
            e.preventDefault();
            sendEmail(); 
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11">/*fichier script js pour utiliser l'alert personnalisée.*/</script>
{% endblock %}
